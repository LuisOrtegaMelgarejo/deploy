(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e5f2"],{RnhZ:function(t,e,a){var s={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function n(t){var e=i(t);return a(e)}function i(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="RnhZ"},WZwz:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"a",function(){return i}),a.d(e,"d",function(){return l}),a.d(e,"b",function(){return r});var s=a("t3Un");function n(){return Object(s.a)({url:"api/areas",method:"get"})}function i(t,e){return Object(s.a)({url:"api/areas/create",method:"post",data:t})}function l(t,e){return Object(s.a)({url:"api/areas/"+e+"/update",method:"put",data:t})}function r(t){return Object(s.a)({url:"api/areas/"+t,method:"delete"})}},ZySA:function(t,e,a){"use strict";var s=a("P2sY"),n=a.n(s),i=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var s=n()({},e.value),i=n()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var r=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(r.width,r.height)+"px",l.appendChild(o)),i.type){case"center":o.style.top=r.height/2-o.offsetHeight/2+"px",o.style.left=r.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-r.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-r.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=i.color,o.className="waves-ripple z-active",!1}},!1)}}),l=function(t){t.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(l)),i.install=l;e.a=i},jUE0:function(t,e,a){},lrLK:function(t,e,a){"use strict";a.r(e);var s=a("FyfS"),n=a.n(s),i=a("P2sY"),l=a.n(i),r=a("wk8/"),o=a("WZwz"),d=a("ZySA"),u=a("7Qib"),c=a("wd/R"),p=a.n(c),m=[{key:"ADMIN",display_name:"Administrador"},{key:"EDITOR",display_name:"Editor"}],f=m.reduce(function(t,e){return t[e.key]=e.display_name,t},{}),v={name:"UserTable",directives:{waves:d.a},filters:{statusFilter:function(t){return{true:"success",false:"danger"}[t]},typeFilter:function(t){return f[t]}},data:function(){return{tableKey:0,users:[],total:null,moment:p.a,listLoading:!0,listQuery:{page:1,limit:20,type:void 0,sort:"+id"},importanceOptions:[1,2],calendarTypeOptions:m,sortOptions:[{label:"ID Ascendente",key:"+id"},{label:"ID Descendente",key:"-id"}],statusOptions:["Activo","Inactivo"],areaOptions:[],showReviewer:!1,areaTemp:{id:void 0,name:""},temp:{id:void 0,name:"",last_name:"",email:"",password:"",active:0,area_id:void 0,updated_at:new Date,created_at:new Date},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Editar",create:"Crear"},dialogPvVisible:!1,pvData:[],rules:{name:[{required:!0,message:"El nombre es obligatorio",trigger:"change"}],last_name:[{required:!0,message:"Los apellidos son obligatorios",trigger:"change"}],email:[{required:!0,message:"Ingrese un email",trigger:"change"}],password:[{required:!0,message:"Ingrese una contraseÃ±a",trigger:"change"}]},passwordType:"password",downloadLoading:!1}},created:function(){this.getList(),this.getListArea(),this.moment.locale("es")},methods:{getListArea:function(){var t=this;Object(o.c)().then(function(e){t.areaOptions=e.data,t.total=e.data.length,console.log(e.data)})},getList:function(){var t=this;this.listLoading=!0,Object(r.b)(this.listQuery).then(function(e){t.users=e.data,t.total=e.data.length,console.log(e.data),setTimeout(function(){t.listLoading=!1},1500)})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleModifyStatus:function(t){this.$message({message:"Estado modificado"+t,type:"success"})},resetTemp:function(){this.temp={id:void 0,name:"",last_name:"",email:"",password:"",active:!1,updated_at:new Date,created_at:new Date}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.temp.name,t.temp.last_name,t.temp.email,t.temp.password,t.temp.updtaed_at,t.temp.created_at;Object(r.a)(t.temp,1).then(function(){t.users.unshift(t.temp),t.dialogFormVisible=!1,t.getList(),t.$notify({title:"Mensaje",message:"Registro creado1",type:"success",duration:2e3})})}})},handleUpdate:function(t){var e=this;this.temp=l()({},t),this.temp.updated_at=new Date(this.temp.updated_at),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateUser:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=l()({},t.temp);a.updated_at=+new Date(a.updated_at),Object(r.e)(a,t.temp.id).then(function(e){var a=!0,s=!1,i=void 0;try{for(var l,r=n()(t.users);!(a=(l=r.next()).done);a=!0){var o=l.value;if(o.id===t.temp.id){var d=t.users.indexOf(o);t.users.splice(d,1,t.temp);break}}}catch(t){s=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}t.getList(),t.dialogFormVisible=!1,t.$notify({title:"Mensaje",message:"Usuario modificado correctamente",type:"success",duration:2e3})})}})},handleDelete:function(t){this.$notify({title:"Mensaje",message:"Registro borrado",type:"success",duration:2e3});var e=this.users.indexOf(t);this.users.splice(e,1)},handleFetchPv:function(t){var e=this;fetchPv(t).then(function(t){e.pvData=t.data.pvData,e.dialogPvVisible=!0})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-0d49"),a.e("chunk-2f02")]).then(a.bind(null,"S/jZ")).then(function(e){var a=t.formatJson(["id","name","last_name","email","status","created_at","updated_at"],t.users);e.export_json_to_excel({header:["id","name","last_name","email","status","created_at","updated_at"],data:a,filename:"user-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(u.d)(e[t]):e[t]})})}}},h=a("KHd+"),b=Object(h.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:t.$t("table.type"),clearable:""},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.calendarTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name+"("+t.key+")",value:t.key}})})),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})})),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("table.add")))]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v(t._s(t.$t("table.export")))])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.users,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:t.$t("table.id"),align:"center",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.first_name"),"min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.last_name"),"min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.last_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.email"),"min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.email))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.area"),"min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.area.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.status"),"class-name":"status-col",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.active)}},[t._v(t._s(e.row.active))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.createdAt"),width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.moment(e.row.created_at).fromNow()))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.updatedAt"),width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.moment(e.row.updated_at).fromNow()))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v(t._s(t.$t("table.edit")))]),t._v(" "),1!=e.row.active?a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleModifyStatus("true")}}},[t._v(t._s(t.$t("table.activar")))]):t._e(),t._v(" "),0!=e.row.active?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handleModifyStatus("false")}}},[t._v(t._s(t.$t("table.desactivar"))+"\n        ")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"90px"}},[a("el-form-item",{attrs:{label:t.$t("table.first_name"),prop:"name"}},[a("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.last_name"),prop:"last_name"}},[a("el-input",{model:{value:t.temp.last_name,callback:function(e){t.$set(t.temp,"last_name",e)},expression:"temp.last_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.email"),prop:"email"}},[a("el-input",{model:{value:t.temp.email,callback:function(e){t.$set(t.temp,"email",e)},expression:"temp.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.password"),prop:"password"}},[a("el-input",{attrs:{type:t.passwordType},model:{value:t.temp.password,callback:function(e){t.$set(t.temp,"password",e)},expression:"temp.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("table.area")}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Seleccione de la lista"},model:{value:t.areaTemp,callback:function(e){t.areaTemp=e},expression:"areaTemp"}},t._l(t.areaOptions,function(t){return a("el-option",{key:t,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v(t._s(t.$t("table.confirm")))]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateUser}},[t._v(t._s(t.$t("table.confirm")))])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogPvVisible,title:"Reading statistics"},on:{"update:visible":function(e){t.dialogPvVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pvData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"key",label:"Channel"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pv",label:"Pv"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogPvVisible=!1}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,null,null);b.options.__file="listUser.vue";e.default=b.exports},"wk8/":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return l}),a.d(e,"a",function(){return r}),a.d(e,"e",function(){return o});var s=a("t3Un");function n(t){return Object(s.a)({url:"api/users",method:"get",params:t})}function i(t){return Object(s.a)({url:"api/users",method:"post",data:{role_id:"1,3"}})}function l(t){return Object(s.a)({url:"api/users",method:"post",data:{role_id:"2"}})}function r(t,e){return Object(s.a)({url:"api/users/create",method:"post",data:t,params:{areaId:e}})}function o(t,e){return Object(s.a)({url:"api/users/"+e+"/update",method:"put",data:t,params:{id:e}})}}}]);